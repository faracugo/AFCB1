:root{
  --bg1:#140018;
  --bg2:#3a003f;
  --pink:#ff4d6d;
  --rose:#ff8fab;
  --paper:#fff7fb;
  --ink:#2b1b2b;
  --shadow: 0 18px 55px rgba(0,0,0,.35);
  --radius: 18px;
  --ease: cubic-bezier(.2,.8,.2,1);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
  color:#fff;
  background: radial-gradient(1200px 700px at 30% 10%, #6b003a 0%, transparent 60%),
              radial-gradient(900px 600px at 80% 30%, #3a2a90 0%, transparent 55%),
              linear-gradient(160deg, var(--bg1), var(--bg2));
  overflow-x:hidden;
}

.wrap{
  min-height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:32px 16px;
  gap:22px;
}

.top{
  text-align:center;
  max-width:780px;
}
.top h1{
  margin:0 0 6px;
  letter-spacing:.3px;
  font-size: clamp(1.5rem, 2.6vw, 2.25rem);
}
.subtitle{
  margin:0;
  opacity:.9;
}

.card{
  width:min(860px, 100%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}

.envelope{
  width:min(640px, 92vw);
  height:min(420px, 64vw);
  max-height:420px;
  position:relative;
  cursor:pointer;
  filter: drop-shadow(var(--shadow));
  outline:none;
  transform: translateZ(0);
}

.env-back{
  position:absolute; inset:0;
  background: linear-gradient(145deg, #ff7aa2, #ff3d6a);
  border-radius: var(--radius);
}

.env-front{
  position:absolute; inset:0;
  background:
    linear-gradient(135deg, transparent 50%, rgba(255,255,255,.2) 50%),
    linear-gradient(225deg, transparent 50%, rgba(255,255,255,.2) 50%);
  border-radius: var(--radius);
  opacity:.25;
}

.env-flap{
  position:absolute;
  left:0; right:0;
  top:0;
  height:55%;
  background: linear-gradient(180deg, #ff9dbb, #ff4d6d);
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
  transform-origin: top center;
  transform: rotateX(0deg);
  transition: transform .75s var(--ease);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
}

.letter{
  position:absolute;
  left:6%;
  right:6%;
  bottom:6%;
  height:82%;
  background: var(--paper);
  border-radius: 14px;
  transform: translateY(32%) scale(.98);
  transition: transform .85s var(--ease);
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.35);
}

.letter-inner{
  height:100%;
  padding: 18px 18px 14px;
  color: var(--ink);
  overflow:auto;
}

.to{
  margin:0 0 6px;
  font-size:.95rem;
}
.letter-title{
  margin:4px 0 10px;
  font-size:1.2rem;
  color:#5b1643;
}

.poem{
  background: rgba(255,77,109,.08);
  border: 1px solid rgba(255,77,109,.25);
  border-radius: 14px;
  padding: 14px 14px;
}
#poemText{
  margin:0;
  font-size: 1.02rem;
  line-height:1.55;
  white-space: pre-wrap;
}

.signature{
  margin: 12px 0 0;
  font-weight:600;
}

.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}

.btn{
  appearance:none;
  border:none;
  background: var(--pink);
  color:white;
  padding:10px 14px;
  border-radius: 999px;
  font-weight:700;
  cursor:pointer;
  transition: transform .12s ease, filter .12s ease;
}
.btn:hover{ filter: brightness(1.05); transform: translateY(-1px); }
.btn:active{ transform: translateY(1px); }

.btn.ghost{
  background: transparent;
  border: 1px solid rgba(255,77,109,.55);
  color:#7b1d55;
}

.promise{
  margin: 12px 0 0;
  padding: 12px 12px;
  background: rgba(255,143,171,.22);
  border-radius: 14px;
  border: 1px dashed rgba(255,77,109,.45);
}

.tiny{
  margin: 10px 0 0;
  font-size:.85rem;
  opacity:.75;
}

.hint{
  margin:0;
  opacity:.9;
  font-size:.95rem;
}

.footer{
  opacity:.75;
  font-size:.92rem;
  text-align:center;
}

/* Estado abierto */
.envelope.open .env-flap{
  transform: rotateX(180deg);
}
.envelope.open .letter{
  transform: translateY(-8%) scale(1);
}

/* Corazones flotando */
.hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:0;
}
.heart{
  position:absolute;
  width:14px; height:14px;
  background: var(--rose);
  transform: rotate(45deg);
  opacity:.75;
  animation: floatUp linear forwards;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
}
.heart::before,
.heart::after{
  content:"";
  position:absolute;
  width:14px; height:14px;
  background: var(--rose);
  border-radius:50%;
}
.heart::before{ left:-7px; top:0; }
.heart::after{ top:-7px; left:0; }

@keyframes floatUp{
  from{ transform: translateY(110vh) rotate(45deg) scale(.9); }
  to{ transform: translateY(-20vh) rotate(45deg) scale(1.25); opacity:0; }
}

@media (max-width:480px){
  .letter-inner{ padding:14px; }
  #poemText{ font-size: 1rem; }
}

